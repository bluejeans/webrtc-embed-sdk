!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("mobx")):"function"==typeof define&&define.amd?define("BJNEmbedSDK",["mobx"],t):"object"==typeof exports?exports.BJNEmbedSDK=t(require("mobx")):e.BJN=t(e.mobx)}(window,function(e){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(t,o){t.exports=e},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoState=t.BJNEConnectionState=void 0,function(e){e.CONNECTING="Connecting",e.CONNECTED="Connected",e.RECONNECTING="Reconnecting",e.DISCONNECTED="Disconnected"}(t.BJNEConnectionState||(t.BJNEConnectionState={})),function(e){e.ACTIVE="ACTIVE",e.INACTIVE_ONLY_PARTICIPANT="INACTIVE_ONLY_PARTICIPANT",e.INACTIVE_NO_ONE_HAS_VIDEO="INACTIVE_NO_ONE_HAS_VIDEO",e.INACTIVE_NEEDS_MODERATOR="INACTIVE_NEEDS_MODERATOR",e.INACTIVE_DISCONNECTED="INACTIVE_DISCONNECTED"}(t.VideoState||(t.VideoState={}))},function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BJNEmbedSDK=t.VideoState=t.BJNEConnectionState=t.Locale=void 0;const a=o(0),s=r(o(3)),c=o(1);class l{constructor(){this.isSDKInitComplete=!1,this.joinManager=new s.default(this)}_setConnectionState(){this.connectionState=this._connectionState}joinMeeting(e){let t=this._buildUIConfig(e);this.joinManager.joinMeeting(e,a.action(()=>{this.isSDKInitComplete=!0,this.setUIPropsFromConfig(t),a.reaction(()=>this._connectionState,()=>{this._connectionState===c.BJNEConnectionState.DISCONNECTED?setTimeout(()=>{this._setConnectionState()},500):this._setConnectionState()})}))}_buildUIConfig(e){let t={},o=e.uiProps.teleHealthConfig&&Object.keys(e.uiProps.teleHealthConfig).length>0;if(e.uiProps.hideSignInButton&&(t.sign_in=!1),e.uiProps.disableFullScreenToggle&&(t.fullscreen_toggle=!1),e.uiProps.hideFooter&&(t.footer=!1),e.uiProps.hideChatPanel&&(t.chat=!1),e.uiProps.hideAppsPanel&&(t.apps=!1),e.uiProps.hideRoomJoinOption&&(t.room_pairing=!1),e.uiProps.lockMeetingControls&&(t.layout=!0),e.uiProps.hideCopyLink&&(t.copy_link=!1),e.uiProps.hideRatingScreen&&(t.rating=!1),e.uiProps.hideAppPitches&&(t.app_pitch=!1),e.uiProps.hideOtherJoinOptions&&(t.join_options=!1),o?e.uiProps.teleHealthConfig.backgroundColor&&(t.bg=encodeURIComponent(e.uiProps.teleHealthConfig.backgroundColor)):(e.uiProps.customBackground&&(t.bg=encodeURIComponent(e.uiProps.customBackground)),e.uiProps.inMeetingBGConfig&&e.uiProps.inMeetingBGConfig.audioTileColor&&(t.audioTileBG=encodeURIComponent(e.uiProps.inMeetingBGConfig.audioTileColor)),e.uiProps.inMeetingBGConfig&&e.uiProps.inMeetingBGConfig.containerColorOfAllTiles&&(t.tileContainerBG=encodeURIComponent(e.uiProps.inMeetingBGConfig.containerColorOfAllTiles))),e.uiProps.locale&&(t.ll=encodeURIComponent(e.uiProps.locale)),o||e.uiProps.hideCopyLink){let n=o?Object.assign({},e.uiProps.teleHealthConfig):{};n.shareLinkVisibility=!e.uiProps.hideCopyLink,t.teleHealthConfig=encodeURIComponent(JSON.stringify(n))}return t}get version(){return"2.1.1"}leave(){}leaveAndEndForAll(){}setAudioMuted(e){}setVideoMuted(e){}startScreenShare(){}stopScreenShare(){}setName(e){}setUIPropsFromConfig(e){}setRemoteAudioMuted(e){}observe(e,t){Object.getOwnPropertyNames(this).includes(e)?a.reaction(()=>this[e],()=>{t()}):console.error("Property is not supported.")}}n([a.observable,i("design:type",Boolean)],l.prototype,"isSDKInitComplete",void 0),n([a.observable,i("design:type",String)],l.prototype,"connectionState",void 0),n([a.observable,i("design:type",Boolean)],l.prototype,"audioMuted",void 0),n([a.observable,i("design:type",Boolean)],l.prototype,"videoMuted",void 0),n([a.observable,i("design:type",Boolean)],l.prototype,"receivingScreenShare",void 0),n([a.observable,i("design:type",Boolean)],l.prototype,"sharingScreen",void 0),n([a.observable,i("design:type",Boolean)],l.prototype,"canShareScreen",void 0),n([a.observable,i("design:type",Array)],l.prototype,"participants",void 0),n([a.observable,i("design:type",Object)],l.prototype,"selfParticipant",void 0),n([a.observable,i("design:type",Array)],l.prototype,"chatMessages",void 0),n([a.observable,i("design:type",String)],l.prototype,"videoState",void 0),n([a.observable,i("design:type",Boolean)],l.prototype,"remoteAudioMuted",void 0),n([a.observable,i("design:type",String)],l.prototype,"_connectionState",void 0),n([a.action,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],l.prototype,"_setConnectionState",null);var u=o(6);Object.defineProperty(t,"Locale",{enumerable:!0,get:function(){return u.Locale}});var d=o(1);Object.defineProperty(t,"BJNEConnectionState",{enumerable:!0,get:function(){return d.BJNEConnectionState}}),Object.defineProperty(t,"VideoState",{enumerable:!0,get:function(){return d.VideoState}}),t.BJNEmbedSDK=new l},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(4),i=o(5),r="https://bluejeans.com",a="SDK_INIT_COMPLETED";t.default=class{constructor(e){this.embedSDKInterface=e}joinMeeting(e,t){let o=e.meetingInfo,n=e.iFrameProps,a=o.meetingOrigin||i.getQueryParam("env")||r,s=this.formMeetingurl(o,a);s=this.applyUICustomisation(e.uiProps,s);let c=this.buildMeetingIFrame(s,n);console.debug("Trying to establish the connection to the iframe."),this.establishConnectionWithChild(c.contentWindow,a,t)}formMeetingurl(e,t){let o=window.location.origin,n=e.meetingId,i=e.passcode,r=e.name,a=`${t}/${n}`;return i&&(a=`${a}/${i}`),"file://"===o&&(o="null"),a=`${a}/quick?embed=true&parent=${o}`,r&&(a=`${a}&name=${encodeURIComponent(r)}`),a=`${a}&version=${encodeURIComponent("2.1.1")}`}buildMeetingIFrame(e,t){let o=document.createElement("iframe");return o.setAttribute("src",e),o.style.width=t.width||"100%",o.style.height=t.height||"100%",o.style.borderRadius="10px",o.setAttribute("allow","autoplay; fullscreen; microphone; camera; display-capture"),o.setAttribute("noResize","true"),t.selectorId?document.querySelector(t.selectorId).appendChild(o):document.body.appendChild(o),o}applyUICustomisation(e,t){return t=e.hideSignInButton?`${t}&sign_in=false`:t,t=e.hideAppPitches?`${t}&app_pitch=false`:t,e.teleHealthConfig&&Object.keys(e.teleHealthConfig).length>0?e.teleHealthConfig.backgroundColor&&(t=`${t}&bg=${encodeURIComponent(e.teleHealthConfig.backgroundColor)}`):e.customBackground&&(t=`${t}&bg=${encodeURIComponent(e.customBackground)}`),t=e.locale?`${t}&ll=${encodeURIComponent(e.locale)}`:t}establishConnectionWithChild(e,t,o){window.addEventListener("message",i=>{console.debug("While establishing connection the parent received : ",i.data),n.messageTypeFromKnownOrigin(i,t,n.MESSAGE_TYPE_IFRAME)&&i.data.info===a&&(n.makeCrossIframeProxy(this.embedSDKInterface,e,t),o())},!1)}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeCrossIframeProxy=t.messageTypeFromKnownOrigin=t.MESSAGE_TYPE_IFRAME=t.MESSAGE_TYPE_PARENT=void 0;const n=o(0);function i(e,t,o){return!(!e.data.type||e.data.type!=o)&&t==e.origin}t.MESSAGE_TYPE_PARENT="crossdomain.toTarget",t.MESSAGE_TYPE_IFRAME="crossdomain.toProxy",t.messageTypeFromKnownOrigin=i,t.makeCrossIframeProxy=function(e,o,r){!function(e,o,r){const a=n.action(o=>{console.debug("Parent Recieved data : ",o.data),i(o,r,t.MESSAGE_TYPE_IFRAME)&&("connectionState"===o.data.property?e._connectionState=o.data.value:e[o.data.property]=o.data.value)});window.addEventListener("message",a,!1)}(e,0,r),function(e,o,n){const i=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(e));Object.keys(i).forEach(r=>{const a=i[r];a.value&&"function"==typeof a.value&&"joinMeeting"!=r&&"observe"!=r&&"_"!==r[0]&&(e[r]=function(){const e=Array.prototype.slice.call(arguments);o.postMessage({type:t.MESSAGE_TYPE_PARENT,method:r,args:e},n)})})}(e,o,r)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryParam=void 0,t.getQueryParam=function(e){try{if(window.location.search){let t,o=function(e){return window.decodeURIComponent(e.replace(/\+/g," "))},n={},i=window.location.search.slice(1).split("&");for(let e=0;e<i.length;e++)(t=i[e].split("="))[0]&&(t.length<2&&t.push(""),n[o(t[0])]=o(t[1]));return n[e]}}catch(e){console.debug("Error in parsing the query params")}return null}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Locale=void 0,function(e){e.EN="en",e.ES="es",e.DE="de",e.FR="fr",e.JA="ja"}(t.Locale||(t.Locale={}))}])});
//# sourceMappingURL=BJNEmbedSDK.js.map